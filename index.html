<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GeeClock</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              mono: ['Roboto Mono', 'monospace'],
            },
            colors: {
              'primary': 'rgb(var(--color-primary) / <alpha-value>)',
              'secondary': 'rgb(var(--color-secondary) / <alpha-value>)',
              'background': 'rgb(var(--color-background) / <alpha-value>)',
              'surface': 'rgb(var(--color-surface) / <alpha-value>)',
              'text-primary': 'rgb(var(--color-text-primary) / <alpha-value>)',
              'text-secondary': 'rgb(var(--color-text-secondary) / <alpha-value>)',
            },
            keyframes: {
              'fade-in': {
                '0%': { opacity: '0', transform: 'translateY(10px) scale(0.98)' },
                '100%': { opacity: '1', transform: 'translateY(0) scale(1)' },
              },
               'slide-in': {
                '0%': { transform: 'translateY(100%)' },
                '100%': { transform: 'translateY(0)' },
              }
            },
            animation: {
              'fade-in': 'fade-in 0.3s ease-out forwards',
              'slide-in': 'slide-in 0.3s ease-out forwards',
            }
          }
        }
      }
    </script>
  <script type="importmap">
{
  "imports": {
    "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.0/client",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0"
  }
}
</script>
</head>
  <body class="bg-background text-text-primary font-sans transition-colors duration-300">
    <div id="root"></div>
    <script type="module">
import React, { useState, useEffect, useCallback, useRef } from 'react';
import ReactDOM from 'react-dom/client';

// --- START OF constants.ts ---
const THEMES = {
    default: { dark: { primary: '79 70 229', secondary: '16 185 129', background: '17 24 39', surface: '31 41 55', 'text-primary': '249 250 251', 'text-secondary': '156 163 175', }, light: { primary: '79 70 229', secondary: '16 185 129', background: '243 244 246', surface: '255 255 255', 'text-primary': '17 24 39', 'text-secondary': '55 65 81', } },
    ocean: { dark: { primary: '59 130 246', secondary: '52 211 153', background: '15 23 42', surface: '30 41 59', 'text-primary': '241 245 249', 'text-secondary': '148 163 184', }, light: { primary: '59 130 246', secondary: '22 163 74', background: '240 249 255', surface: '255 255 255', 'text-primary': '30 41 59', 'text-secondary': '71 85 105', } },
    sunset: { dark: { primary: '249 115 22', secondary: '239 68 68', background: '28 25 23', surface: '41 37 36', 'text-primary': '250 250 249', 'text-secondary': '168 162 158', }, light: { primary: '234 88 12', secondary: '220 38 38', background: '254 252 251', surface: '255 255 255', 'text-primary': '28 25 23', 'text-secondary': '68 64 60', } },
    forest: { dark: { primary: '34 197 94', secondary: '202 138 4', background: '20 30 20', surface: '30 46 30', 'text-primary': '220 252 231', 'text-secondary': '163 230 170', }, light: { primary: '22 163 74', secondary: '202 138 4', background: '240 253 244', surface: '255 255 255', 'text-primary': '21 21 21', 'text-secondary': '63 63 63', } },
    graphite: { dark: { primary: '148 163 184', secondary: '100 116 139', background: '15 23 42', surface: '30 41 59', 'text-primary': '241 245 249', 'text-secondary': '148 163 184', }, light: { primary: '71 85 105', secondary: '100 116 139', background: '241 245 249', surface: '255 255 255', 'text-primary': '15 23 42', 'text-secondary': '51 65 85', } },
    rose: { dark: { primary: '251 113 133', secondary: '251 146 60', background: '53 23 29', surface: '79 32 43', 'text-primary': '255 241 242', 'text-secondary': '253 164 175', }, light: { primary: '244 63 94', secondary: '217 119 6', background: '255 241 242', surface: '255 255 255', 'text-primary': '131 24 67', 'text-secondary': '190 24 93', } }
};
const ALARM_SOUNDS = {
    default: { name: 'Alarm Clock', url: 'https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg' },
    digital: { name: 'Digital', url: 'https://actions.google.com/sounds/v1/alarms/digital_watch_alarm_long.ogg' },
    bell: { name: 'School Bell', url: 'https://actions.google.com/sounds/v1/alarms/school_bell.ogg' },
    rooster: { name: 'Rooster', url: 'https://actions.google.com/sounds/v1/animals/rooster_crowing.ogg' },
};
const INITIAL_SETTINGS = { 
    theme: 'default', 
    darkMode: false, 
    alarmSound: 'default', 
    customAlarmSoundUrl: '', 
    showDateTimeInHeader: true,
    hourFormat: '12',
    icalUrl: '',
};
const YOUTUBE_PLAYLIST_ID = 'PLj__38I3K-75b22YyZ_j4i6sC7_m9Z-1L';
// --- END OF constants.ts ---

// --- START OF hooks/useLocalStorage.ts ---
function useLocalStorage(key, initialValue) {
  const [storedValue, setStoredValue] = useState(() => {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      console.error(error);
      return initialValue;
    }
  });

  const setValue = (value) => {
    try {
      const valueToStore = value instanceof Function ? value(storedValue) : value;
      setStoredValue(valueToStore);
      window.localStorage.setItem(key, JSON.stringify(valueToStore));
    } catch (error) {
      console.error(error);
    }
  };

  return [storedValue, setValue];
}
// --- END OF hooks/useLocalStorage.ts ---

// --- START OF hooks/useInterval.ts ---
function useInterval(callback, delay) {
  const savedCallback = useRef(null);

  useEffect(() => {
    savedCallback.current = callback;
  }, [callback]);

  useEffect(() => {
    function tick() {
      if (savedCallback.current) {
        savedCallback.current();
      }
    }
    if (delay !== null) {
      let id = setInterval(tick, delay);
      return () => clearInterval(id);
    }
  }, [delay]);
}
// --- END OF hooks/useInterval.ts ---

// --- START OF utils/ical.ts ---
const parseICalDate = (dateStr) => {
  const year = parseInt(dateStr.substring(0, 4), 10);
  const month = parseInt(dateStr.substring(4, 6), 10) - 1;
  const day = parseInt(dateStr.substring(6, 8), 10);
  const hour = parseInt(dateStr.substring(9, 11), 10);
  const minute = parseInt(dateStr.substring(11, 13), 10);
  const second = parseInt(dateStr.substring(13, 15), 10);
  
  if (dateStr.endsWith('Z')) {
    return new Date(Date.UTC(year, month, day, hour, minute, second));
  }
  return new Date(year, month, day, hour, minute, second);
};
const parseICal = (icalData) => {
  const events = [];
  const lines = icalData.replace(/\r\n/g, '\n').split('\n');
  
  let currentEvent = null;
  
  lines.forEach(line => {
    if (line.startsWith('BEGIN:VEVENT')) {
      currentEvent = {};
    } else if (line.startsWith('END:VEVENT')) {
      if (currentEvent && currentEvent.uid && currentEvent.summary && currentEvent.start && currentEvent.end) {
        events.push(currentEvent);
      }
      currentEvent = null;
    } else if (currentEvent) {
      if (line.startsWith('UID:')) {
        currentEvent.uid = line.substring(4);
      } else if (line.startsWith('SUMMARY:')) {
        currentEvent.summary = line.substring(8);
      } else if (line.startsWith('DTSTART')) {
        const dateStr = line.split(':').pop() || '';
        currentEvent.start = parseICalDate(dateStr);
      } else if (line.startsWith('DTEND')) {
        const dateStr = line.split(':').pop() || '';
        currentEvent.end = parseICalDate(dateStr);
      }
    }
  });
  
  return events.sort((a, b) => a.start.getTime() - b.start.getTime());
};
// --- END OF utils/ical.ts ---

// --- START OF components/Icon.tsx ---
const ICONS = {
    clock: React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" }),
    timer: React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" }),
    plus: React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M12 4.5v15m7.5-7.5h-15" }),
    cog: React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M9.594 3.94c.09-.542.56-1.007 1.11-.962l5.123.48c.55.052.994.546.942 1.096l-.48 5.123c-.044.472-.47.84-1.096.942l-5.123-.48c-.55-.052-.994-.546-.942-1.096L9.594 3.94zM15 12a3 3 0 11-6 0 3 3 0 016 0z" }),
    x: React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M6 18L18 6M6 6l12 12" }),
    play: React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z" }),
    pause: React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M15.75 5.25v13.5m-6-13.5v13.5" }),
    trash: React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.226 2.077H8.062a2.25 2.25 0 01-2.226-2.077L3.882 5.79m18.12-1.02A1.125 1.125 0 0020.25 5.25h-4.5M12 5.25V3m-4.5 2.25H3.75m0 0A1.125 1.125 0 012.625 4.125h18.75c.621 0 1.125.504 1.125 1.125v0" }),
    reset: React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-4.991-2.691L7.98 12.54M16.023 9.348L12.057 5l-4.066 4.067" }),
    calendar: React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18" }),
    'chevron-down': React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M19.5 8.25l-7.5 7.5-7.5-7.5" }),
    'chevron-up': React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M4.5 15.75l7.5-7.5 7.5 7.5" }),
    'volume-up': React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M11.25 5.25v13.5l-4.125-4.125H4.5A2.25 2.25 0 012.25 12v-3a2.25 2.25 0 012.25-2.25h2.625L11.25 5.25z" }),
    stop: React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z" }),
    music: React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-2.25 2.25h-1.5a2.25 2.25 0 01-2.25-2.25v-3.75m0-6.553l-10.5 3m10.5-3v6.553" }),
    bell: React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" }),
};
const Icon = ({ name, className }) => {
  return (
    React.createElement("svg", { 
      xmlns: "http://www.w3.org/2000/svg", 
      fill: "none", 
      viewBox: "0 0 24 24", 
      strokeWidth: 1.5, 
      stroke: "currentColor", 
      className: className
    }, 
      ICONS[name]
    )
  );
};
// --- END OF components/Icon.tsx ---

// --- START OF components/YouTubePlayer.tsx ---
const YouTubePlayer = ({ playlistId }) => {
    const embedUrl = `https://www.youtube.com/embed/videoseries?list=${playlistId}&autoplay=1&rel=0`;

    return (
        React.createElement("div", { className: "aspect-video w-full" },
            React.createElement("iframe", {
                src: embedUrl,
                title: "YouTube Music Playlist",
                frameBorder: "0",
                allow: "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",
                allowFullScreen: true,
                className: "w-full h-full rounded-md"
            })
        )
    );
};
// --- END OF components/YouTubePlayer.tsx ---

// --- START OF components/Modal.tsx ---
const Modal = ({ isOpen, onClose, title, children, onTitleClick, size = 'default' }) => {
  if (!isOpen) return null;

  const isFullscreen = size === 'fullscreen';

  if (isFullscreen) {
    return (
      React.createElement("div", { 
        className: "fixed inset-0 bg-background z-50 animate-fade-in",
        role: "dialog", 
        "aria-modal": "true", 
        "aria-labelledby": "modal-title"
      }, 
        React.createElement("div", { className: "bg-surface shadow-lg w-full h-full flex flex-col" }, 
          React.createElement("header", { className: "flex justify-between items-center p-4 border-b border-white/10 flex-shrink-0" }, 
            React.createElement("h2", { id: "modal-title", className: "text-lg font-semibold", onClick: onTitleClick, style: { cursor: onTitleClick ? 'pointer' : 'default' } }, title), 
            React.createElement("button", { onClick: onClose, className: "p-1 rounded-full hover:bg-white/10", "aria-label": "Close modal" }, React.createElement(Icon, { name: "x", className: "w-5 h-5" }))
          ), 
          React.createElement("main", { className: "flex-1 overflow-hidden" }, 
            children
          )
        )
      )
    );
  }
  
  return (
    React.createElement("div", { className: "fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in", onClick: onClose, role: "dialog", "aria-modal": "true", "aria-labelledby": "modal-title" }, 
      React.createElement("div", { className: "bg-surface rounded-xl shadow-lg w-full max-w-md m-4 animate-slide-in", onClick: e => e.stopPropagation() }, 
        React.createElement("header", { className: "flex justify-between items-center p-4 border-b border-white/10" }, 
          React.createElement("h2", { id: "modal-title", className: "text-lg font-semibold", onClick: onTitleClick, style: { cursor: onTitleClick ? 'pointer' : 'default' } }, title), 
          React.createElement("button", { onClick: onClose, className: "p-1 rounded-full hover:bg-white/10", "aria-label": "Close modal" }, React.createElement(Icon, { name: "x", className: "w-5 h-5" }))
        ), 
        React.createElement("main", { className: "p-4" }, 
          children
        )
      )
    )
  );
};
// --- END OF components/Modal.tsx ---

// --- START OF components/Header.tsx ---
const HeaderClock = ({ hourFormat }) => {
    const [time, setTime] = useState(new Date());
    useEffect(() => {
        const timerId = setInterval(() => setTime(new Date()), 1000);
        return () => clearInterval(timerId);
    }, []);

    const timeString = time.toLocaleTimeString([], { 
        hour: '2-digit', 
        minute: '2-digit', 
        hour12: hourFormat === '12' 
    });

    return (
        React.createElement("div", { className: "text-right hidden sm:block" }, 
            React.createElement("div", { className: "font-mono text-lg font-semibold text-text-primary tracking-tight" }, timeString), 
            React.createElement("div", { className: "text-xs text-text-secondary" }, 
                time.toLocaleDateString([], { weekday: 'short', month: 'short', day: 'numeric' })
            )
        )
    );
};
const Header = ({ onSettingsClick, settings }) => {
  return (
    React.createElement("header", { className: "flex justify-between items-center p-4 md:p-6 animate-fade-in" }, 
      React.createElement("h1", { className: "text-2xl font-bold tracking-tighter text-text-primary" }, "GeeClock"), 
      React.createElement("div", { className: "flex items-center gap-4" }, 
        settings.showDateTimeInHeader && React.createElement(HeaderClock, { hourFormat: settings.hourFormat }), 
        React.createElement("div", { className: "flex items-center gap-2" }, 
          React.createElement("button", { onClick: onSettingsClick, className: "p-2 rounded-full hover:bg-surface transition-colors", "aria-label": "Open Settings" }, 
            React.createElement(Icon, { name: "cog", className: "w-6 h-6" })
          )
        )
      )
    )
  );
};
// --- END OF components/Header.tsx ---

// --- START OF components/Clock.tsx ---
const Clock = ({ hourFormat }) => {
  const [time, setTime] = useState(new Date());

  useEffect(() => {
      const timerId = setInterval(() => setTime(new Date()), 1000);
      return () => clearInterval(timerId);
  }, []);

  const getFormattedTime = () => {
    return time.toLocaleTimeString([], { 
        hour: hourFormat === '12' ? 'numeric' : '2-digit', 
        minute: '2-digit', 
        second: '2-digit', 
        hour12: hourFormat === '12'
    });
  };
  
  return (
      React.createElement("div", { className: "flex flex-col items-center justify-center p-8 animate-fade-in" }, 
          React.createElement("div", { className: "font-mono text-6xl md:text-8xl lg:text-9xl font-bold tracking-tighter text-primary" }, 
              getFormattedTime()
          ), 
          React.createElement("div", { className: "mt-2 text-lg md:text-xl text-text-secondary" }, 
              time.toLocaleDateString([], { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })
          )
      )
  );
};
// --- END OF components/Clock.tsx ---

// --- START OF components/Timer.tsx ---
const formatTime = (seconds) => {
    const h = Math.floor(seconds / 3600).toString().padStart(2, '0');
    const m = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
    const s = (seconds % 60).toString().padStart(2, '0');
    return `${h}:${m}:${s}`;
};
const Timer = ({ timer, onDelete, onToggle, onReset, onToggleCollapse, alarmSoundUrl }) => {
    const [remaining, setRemaining] = useState(timer.remaining);
    const [isAlarming, setIsAlarming] = useState(false);
    const audioRef = useRef(null);

    useEffect(() => {
        setRemaining(timer.remaining);
        if (isAlarming && timer.remaining > 0) {
            setIsAlarming(false);
        }
    }, [timer.remaining, isAlarming]);

    useInterval(() => {
        if (timer.isRunning && timer.startTime) {
            const elapsed = (Date.now() - timer.startTime) / 1000;
            const newRemaining = timer.duration - elapsed;
            setRemaining(Math.max(0, newRemaining));

            if (newRemaining <= 0) {
                setIsAlarming(true);
                onToggle(timer.id);
            }
        }
    }, 1000);
    
    useEffect(() => {
        let alarmTimeout;
        if (isAlarming) {
            audioRef.current?.play().catch(e => console.error("Audio playback failed.", e));
            alarmTimeout = window.setTimeout(() => {
                setIsAlarming(false);
            }, 10000);
        } else {
            if (audioRef.current) {
                audioRef.current.pause();
                audioRef.current.currentTime = 0;
            }
        }
        
        return () => {
            clearTimeout(alarmTimeout);
        };
    }, [isAlarming]);

    const stopAlarm = () => {
        if (isAlarming) {
            setIsAlarming(false);
        }
    };

    const handleDeleteClick = () => {
        stopAlarm();
        onDelete(timer.id);
    };

    const progress = ((timer.duration - remaining) / timer.duration) * 100;

    return (
       React.createElement("div", { className: `bg-surface rounded-lg p-4 flex flex-col gap-2 relative overflow-hidden animate-fade-in transition-all duration-300 ${isAlarming ? 'shadow-lg ring-2 ring-red-500/75 animate-pulse' : 'shadow-sm'}` }, 
          React.createElement("div", { className: "absolute top-0 left-0 h-full bg-primary/10", style: { width: `${progress}%`, transition: 'width 1s linear' } }), 
          React.createElement("div", { className: "relative z-10 flex justify-between items-center" }, 
              React.createElement("div", { className: "flex items-center gap-3" },
                timer.isMusicPlayer && React.createElement(Icon, { name: "music", className: "w-5 h-5 text-secondary" }),
                React.createElement("span", { className: "font-semibold text-text-primary" }, timer.label),
                timer.isCollapsed && !timer.isMusicPlayer && React.createElement("span", { className: "font-mono text-sm text-text-secondary" }, formatTime(Math.max(0, Math.round(remaining))))
              ),
              React.createElement("div", { className: "flex items-center" },
                React.createElement("button", { onClick: () => onToggleCollapse(timer.id), className: "p-2 rounded-full hover:bg-text-secondary/10 text-text-secondary transition-colors", "aria-label": timer.isCollapsed ? 'Expand timer' : 'Collapse timer' },
                    React.createElement(Icon, { name: timer.isCollapsed ? 'chevron-down' : 'chevron-up', className: "w-5 h-5" })
                ),
                !timer.isMusicPlayer && (
                    React.createElement(React.Fragment, null,
                        React.createElement("button", { onClick: () => onToggle(timer.id), className: "p-2 rounded-full hover:bg-text-secondary/20 transition-colors", "aria-label": timer.isRunning ? 'Pause timer' : 'Start timer' },
                            React.createElement(Icon, { name: timer.isRunning ? 'pause' : 'play', className: "w-5 h-5 text-primary" })
                        ),
                        React.createElement("button", { onClick: () => onReset(timer.id), className: "p-2 rounded-full hover:bg-text-secondary/10 text-text-secondary transition-colors", "aria-label": "Reset timer" },
                            React.createElement(Icon, { name: "reset", className: "w-5 h-5" })
                        )
                    )
                ),
                React.createElement("button", { onClick: handleDeleteClick, className: "p-2 rounded-full hover:bg-text-secondary/10 text-text-secondary transition-colors", "aria-label": "Delete timer" },
                    React.createElement(Icon, { name: "trash", className: "w-5 h-5" })
                )
              )
          ),
          !timer.isCollapsed && (
            React.createElement("div", { className: "relative z-10 text-center py-4 animate-fade-in" },
                timer.isMusicPlayer ? (
                    React.createElement(YouTubePlayer, { playlistId: YOUTUBE_PLAYLIST_ID })
                ) : (
                    React.createElement("span", { className: "font-mono text-5xl md:text-6xl font-bold text-primary tracking-tight", "aria-live": "polite" }, formatTime(Math.max(0, Math.round(remaining))))
                )
            )
          ),
          isAlarming && (
            React.createElement("div", { className: "relative z-10 animate-fade-in" },
                React.createElement("button", { onClick: stopAlarm, className: "w-full p-2 bg-red-500 text-white font-semibold rounded-md hover:bg-red-600 transition-colors" }, "Stop Alarm")
            )
          ),
          React.createElement("audio", { ref: audioRef, src: alarmSoundUrl, preload: "auto" })
      )
    );
};
// --- END OF components/Timer.tsx ---

// --- START OF components/TimerList.tsx ---
const TimerList = ({ timers, onAdd, onDelete, onToggle, onReset, onToggleCollapse, alarmSoundUrl }) => {
    return (
        React.createElement("div", { className: "p-4 md:p-6 space-y-4 animate-fade-in" }, 
            timers.length === 0 ? (
                React.createElement("div", { className: "text-center py-16 text-text-secondary" }, 
                    React.createElement("p", null, "No timers yet."), 
                    React.createElement("button", { onClick: onAdd, className: "mt-4 inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg font-semibold hover:opacity-90 transition-opacity" }, 
                        React.createElement(Icon, { name: "plus", className: "w-5 h-5" }), "Add Timer"
                    )
                )
            ) : (
                timers.map(timer => (
                    React.createElement(Timer, { key: timer.id, timer: timer, onDelete: onDelete, onToggle: onToggle, onReset: onReset, onToggleCollapse: onToggleCollapse, alarmSoundUrl: alarmSoundUrl })
                ))
            )
        )
    );
};
// --- END OF components/TimerList.tsx ---

// --- START OF components/AddTimerModal.tsx ---
const AddTimerModal = ({ isOpen, onClose, onAddTimer }) => {
    const [label, setLabel] = useState('');
    const [hours, setHours] = useState(0);
    const [minutes, setMinutes] = useState(0);
    const [seconds, setSeconds] = useState(0);

    const handleSubmit = (e) => {
        e.preventDefault();
        const duration = (hours * 3600) + (minutes * 60) + seconds;
        if (duration > 0) {
            onAddTimer({ label: label || 'New Timer', duration });
            setLabel('');
            setHours(0);
            setMinutes(0);
            setSeconds(0);
            onClose();
        }
    };
    
    return (
        React.createElement(Modal, { isOpen: isOpen, onClose: onClose, title: "Add New Timer" }, 
            React.createElement("form", { onSubmit: handleSubmit, className: "space-y-4" }, 
                React.createElement("div", null, 
                    React.createElement("label", { htmlFor: "label", className: "block text-sm font-medium text-text-secondary" }, "Label"), 
                    React.createElement("input", { type: "text", id: "label", value: label, onChange: e => setLabel(e.target.value), placeholder: "e.g., Cooking Pasta", className: "mt-1 w-full p-2 rounded-md bg-background border border-surface focus:ring-2 focus:ring-primary outline-none" })
                ), 
                React.createElement("div", { className: "flex gap-2" }, 
                    React.createElement("div", { className: "flex-1" }, 
                        React.createElement("label", { htmlFor: "hours", className: "block text-sm font-medium text-text-secondary" }, "Hours"), 
                        React.createElement("input", { type: "number", id: "hours", value: hours, onChange: e => setHours(Math.max(0, parseInt(e.target.value, 10) || 0)), min: "0", max: "99", className: "mt-1 w-full p-2 rounded-md bg-background border border-surface focus:ring-2 focus:ring-primary outline-none" })
                    ), 
                    React.createElement("div", { className: "flex-1" }, 
                        React.createElement("label", { htmlFor: "minutes", className: "block text-sm font-medium text-text-secondary" }, "Minutes"), 
                        React.createElement("input", { type: "number", id: "minutes", value: minutes, onChange: e => setMinutes(Math.max(0, parseInt(e.target.value, 10) || 0)), min: "0", max: "59", className: "mt-1 w-full p-2 rounded-md bg-background border border-surface focus:ring-2 focus:ring-primary outline-none" })
                    ), 
                    React.createElement("div", { className: "flex-1" }, 
                        React.createElement("label", { htmlFor: "seconds", className: "block text-sm font-medium text-text-secondary" }, "Seconds"), 
                        React.createElement("input", { type: "number", id: "seconds", value: seconds, onChange: e => setSeconds(Math.max(0, parseInt(e.target.value, 10) || 0)), min: "0", max: "59", className: "mt-1 w-full p-2 rounded-md bg-background border border-surface focus:ring-2 focus:ring-primary outline-none" })
                    )
                ), 
                React.createElement("button", { type: "submit", className: "w-full p-2 bg-primary text-white font-semibold rounded-md hover:opacity-90 transition-opacity" }, "Add Timer")
            )
        )
    );
};
// --- END OF components/AddTimerModal.tsx ---

// --- START OF components/SettingsModal.tsx ---
const SettingsModal = ({ isOpen, onClose, settings, onSettingsChange }) => {
  const [isPlayingTest, setIsPlayingTest] = useState(false);
  const audioRef = useRef(null);

  useEffect(() => {
    if (!isOpen && audioRef.current) {
      audioRef.current.pause();
      audioRef.current = null;
      setIsPlayingTest(false);
    }
  }, [isOpen]);

  const handleTestSound = () => {
    if (isPlayingTest && audioRef.current) {
        audioRef.current.pause();
        return;
    }

    const soundUrl = settings.alarmSound === 'custom'
        ? settings.customAlarmSoundUrl
        : (ALARM_SOUNDS[settings.alarmSound]?.url || ALARM_SOUNDS.default.url);

    if (!soundUrl) return;

    try {
        const audio = new Audio(soundUrl);
        audioRef.current = audio;
        audio.play().catch(e => {
            console.error("Error playing test sound:", e);
            setIsPlayingTest(false);
        });
        audio.onended = () => setIsPlayingTest(false);
        audio.onpause = () => {
          if (audioRef.current === audio) {
            audioRef.current = null;
            setIsPlayingTest(false);
          }
        };
        setIsPlayingTest(true);
    } catch (e) {
        console.error("Failed to create audio object:", e);
    }
  };

  const soundUrl = settings.alarmSound === 'custom'
      ? settings.customAlarmSoundUrl
      : (ALARM_SOUNDS[settings.alarmSound]?.url || ALARM_SOUNDS.default.url);
  const isTestable = !!soundUrl;

  return (
    React.createElement(Modal, { isOpen: isOpen, onClose: onClose, title: "Settings" }, 
      React.createElement("div", { className: "space-y-6" }, 
        React.createElement("div", null, 
          React.createElement("label", { className: "block text-sm font-medium text-text-secondary" }, "Theme"), 
          React.createElement("div", { className: "grid grid-cols-3 gap-2 mt-2" }, 
            Object.keys(THEMES).map(themeKey => (
              React.createElement("button", { key: themeKey, onClick: () => onSettingsChange({...settings, theme: themeKey }), className: `p-2 rounded-md text-sm capitalize border-2 ${settings.theme === themeKey ? 'border-primary' : 'border-surface'}` }, 
                themeKey
              )
            ))
          )
        ), 
        React.createElement("div", null, 
          React.createElement("label", { className: "block text-sm font-medium text-text-secondary" }, "Appearance"), 
          React.createElement("div", { className: "mt-2 flex rounded-md bg-background p-1" }, 
              React.createElement("button", { onClick: () => onSettingsChange({...settings, darkMode: false}), className: `flex-1 p-1.5 rounded text-sm ${!settings.darkMode ? 'bg-surface shadow' : ''}` }, "Light"), 
              React.createElement("button", { onClick: () => onSettingsChange({...settings, darkMode: true}), className: `flex-1 p-1.5 rounded text-sm ${settings.darkMode ? 'bg-surface shadow' : ''}` }, "Dark")
          )
        ), 
         React.createElement("div", null, 
          React.createElement("label", { className: "block text-sm font-medium text-text-secondary" }, "Clock Format"), 
          React.createElement("div", { className: "mt-2 flex rounded-md bg-background p-1" }, 
              React.createElement("button", { onClick: () => onSettingsChange({...settings, hourFormat: '12'}), className: `flex-1 p-1.5 rounded text-sm ${settings.hourFormat === '12' ? 'bg-surface shadow' : ''}` }, "12 Hour"), 
              React.createElement("button", { onClick: () => onSettingsChange({...settings, hourFormat: '24'}), className: `flex-1 p-1.5 rounded text-sm ${settings.hourFormat === '24' ? 'bg-surface shadow' : ''}` }, "24 Hour")
          )
        ), 
         React.createElement("div", { className: "flex items-center justify-between" }, 
            React.createElement("label", { htmlFor: "show-datetime", className: "text-sm font-medium text-text-secondary" }, 
                React.createElement("span", null, "Show Time in Header"),
                React.createElement("p", { className: "text-xs text-text-secondary/70" }, "Display time and date in the header.")
            ), 
            React.createElement("button", {
                id: "show-datetime",
                role: "switch",
                "aria-checked": settings.showDateTimeInHeader,
                onClick: () => onSettingsChange({...settings, showDateTimeInHeader: !settings.showDateTimeInHeader}),
                className: `relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-surface ${settings.showDateTimeInHeader ? 'bg-primary' : 'bg-gray-600'}`
            }, 
                React.createElement("span", { className: `inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${settings.showDateTimeInHeader ? 'translate-x-5' : 'translate-x-0'}` })
            )
        ), 
         React.createElement("div", null, 
          React.createElement("label", { className: "block text-sm font-medium text-text-secondary" }, "Alarm Sound"), 
          React.createElement("div", { className: "flex items-center gap-2" }, 
            React.createElement("select", {
              value: settings.alarmSound,
              onChange: e => onSettingsChange({ ...settings, alarmSound: e.target.value, customAlarmSoundUrl: e.target.value === 'custom' ? settings.customAlarmSoundUrl : '' }),
              className: "mt-1 w-full p-2 rounded-md bg-background border border-surface focus:ring-2 focus:ring-primary outline-none",
              "aria-label": "Select alarm sound"
            }, 
              Object.entries(ALARM_SOUNDS).map(([key, { name }]) => (
                React.createElement("option", { key: key, value: key }, name)
              )), 
              React.createElement("option", { value: "custom" }, "Custom URL")
            ), 
            React.createElement("button", {
                onClick: handleTestSound,
                disabled: !isTestable,
                className: "mt-1 p-2 rounded-full hover:bg-surface disabled:opacity-50 disabled:cursor-not-allowed transition-colors",
                "aria-label": isPlayingTest ? 'Stop sound' : 'Test sound'
            }, 
                React.createElement(Icon, { name: isPlayingTest ? 'stop' : 'volume-up', className: "w-5 h-5 text-primary" })
            )
          )
        ), 
        settings.alarmSound === 'custom' && (
          React.createElement("div", { className: "animate-fade-in" }, 
            React.createElement("label", { htmlFor: "custom-alarm-url", className: "block text-sm font-medium text-text-secondary" }, "Custom Sound URL"), 
            React.createElement("input", {
              type: "url",
              id: "custom-alarm-url",
              value: settings.customAlarmSoundUrl,
              onChange: e => onSettingsChange({ ...settings, customAlarmSoundUrl: e.target.value }),
              placeholder: "https://example.com/sound.mp3",
              className: "mt-1 w-full p-2 rounded-md bg-background border border-surface focus:ring-2 focus:ring-primary outline-none"
            })
          )
        ), 
        React.createElement("div", { className: "pt-4 mt-4 border-t border-surface" }, 
            React.createElement("h3", { className: "text-md font-semibold text-text-primary" }, "Calendar Integration"), 
            React.createElement("div", { className: "mt-2" }, 
                React.createElement("label", { htmlFor: "ical-url", className: "block text-sm font-medium text-text-secondary" }, "iCal Feed URL"), 
                React.createElement("input", {
                  type: "url",
                  id: "ical-url",
                  value: settings.icalUrl,
                  onChange: e => onSettingsChange({ ...settings, icalUrl: e.target.value }),
                  placeholder: "https://your-calendar-provider.com/...",
                  className: "mt-1 w-full p-2 rounded-md bg-background border border-surface focus:ring-2 focus:ring-primary outline-none"
                }), 
                React.createElement("p", { className: "text-xs text-text-secondary/70 mt-1" }, "Provide a public iCal URL to see your upcoming events.")
            )
        )
      )
    )
  );
};
// --- END OF components/SettingsModal.tsx ---

// --- START OF components/Events.tsx ---
const EventCard = ({ event, isCurrent, isNext }) => {
    const formatEventTime = (date) => date.toLocaleTimeString(undefined, { hour: '2-digit', minute: '2-digit' });
    const cardClass = isCurrent 
        ? 'bg-primary/10 border-l-4 border-primary'
        : isNext
        ? 'bg-secondary/10 border-l-4 border-secondary'
        : 'bg-surface';

    return (
        React.createElement("div", { className: `p-4 rounded-lg flex items-start gap-4 transition-colors ${cardClass}` },
            React.createElement("div", { className: "font-mono text-center" },
                React.createElement("p", { className: `text-lg font-bold ${isCurrent ? 'text-primary' : isNext ? 'text-secondary' : 'text-text-primary'}` }, formatEventTime(event.start))
            ),
            React.createElement("div", { className: "flex-1" },
                React.createElement("div", { className: "flex items-center gap-2" },
                    React.createElement("p", { className: "font-semibold text-text-primary" }, event.summary),
                    isCurrent && React.createElement("span", { className: "text-xs font-bold text-primary bg-primary/20 px-2 py-0.5 rounded-full" }, "NOW"),
                    isNext && React.createElement("span", { className: "text-xs font-bold text-secondary bg-secondary/20 px-2 py-0.5 rounded-full" }, "NEXT")
                ),
                React.createElement("p", { className: "text-sm text-text-secondary" }, `${formatEventTime(event.start)} - ${formatEventTime(event.end)}`)
            )
        )
    );
};
const Events = ({ events, loading, error, icalUrl }) => {
    const formatDate = (date) => {
        return date.toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
    };

    const groupEventsByDate = (events) => {
        const groups = {};
        events.forEach(event => {
            const dateKey = formatDate(event.start);
            if (!groups[dateKey]) {
                groups[dateKey] = [];
            }
            groups[dateKey].push(event);
        });
        return groups;
    };

    const groupedEvents = groupEventsByDate(events);
    const now = new Date();
    
    const currentEvent = events.find(event => now >= event.start && now < event.end);
    const nextEvent = events.find(event => event.start > now);

    if (!icalUrl) {
        return (
            React.createElement("div", { className: "text-center py-16 text-text-secondary animate-fade-in" }, 
                React.createElement(Icon, { name: "calendar", className: "w-12 h-12 mx-auto" }), 
                React.createElement("p", { className: "mt-4" }, "No iCal feed URL provided."), 
                React.createElement("p", { className: "text-sm" }, "Please add one in the settings to see your upcoming events.")
            )
        );
    }
    
    if (loading) {
        return (
            React.createElement("div", { className: "text-center py-16 text-text-secondary animate-fade-in" }, 
                 React.createElement("div", { className: "w-8 h-8 mx-auto border-2 border-primary border-t-transparent rounded-full animate-spin" }), 
                 React.createElement("p", { className: "mt-4" }, "Loading events...")
            )
        );
    }

    if (error) {
        return (
             React.createElement("div", { className: "text-center py-16 text-red-400 animate-fade-in" }, 
                React.createElement("p", null, "Error loading events."), 
                React.createElement("p", { className: "text-sm" }, error)
            )
        );
    }
    
    const noEventsFound = Object.keys(groupedEvents).length === 0;

    return (
        React.createElement("div", { className: "p-4 md:p-6 space-y-6 animate-fade-in" },
            (currentEvent || nextEvent) && (
                React.createElement("div", null,
                    React.createElement("h2", { className: "text-lg font-semibold text-text-primary mb-2" }, "Highlights"),
                    React.createElement("div", { className: "space-y-3" },
                        currentEvent && React.createElement(EventCard, { event: currentEvent, isCurrent: true }),
                        nextEvent && React.createElement(EventCard, { event: nextEvent, isNext: true })
                    )
                )
            ),
            (currentEvent || nextEvent) && !noEventsFound && React.createElement("hr", { className: "border-surface" }),
            !noEventsFound ? (
                Object.entries(groupedEvents).map(([date, dateEvents]) => (
                    React.createElement("div", { key: date },
                        React.createElement("h2", { className: "text-lg font-semibold text-text-primary mb-2 sticky top-0 bg-background/80 backdrop-blur-sm py-2" }, date),
                        React.createElement("div", { className: "space-y-3" },
                            dateEvents.map(event => (
                                React.createElement(EventCard, { 
                                    key: event.uid,
                                    event: event, 
                                    isCurrent: currentEvent?.uid === event.uid,
                                    isNext: nextEvent?.uid === event.uid
                                })
                            ))
                        )
                    )
                ))
            ) : (
                 React.createElement("div", { className: "text-center py-16 text-text-secondary" },
                    React.createElement("p", null, "No upcoming events found.")
                )
            )
        )
    );
};
// --- END OF components/Events.tsx ---

// --- START OF components/EventNotification.tsx ---
const EventNotification = ({ notification, onClose }) => {
  useEffect(() => {
    const timer = setTimeout(() => {
      onClose(notification.id);
    }, 15000); // Auto-dismiss after 15 seconds

    return () => clearTimeout(timer);
  }, [notification.id, onClose]);

  const formatTime = (date) => {
    return date.toLocaleTimeString(undefined, {
        hour: '2-digit',
        minute: '2-digit'
    });
  };

  return (
    React.createElement("div", { className: "bg-surface rounded-lg shadow-xl p-4 w-80 flex items-start gap-4 animate-fade-in", role: "alert" },
      React.createElement("div", { className: "flex-shrink-0 text-primary pt-1" },
        React.createElement(Icon, { name: "bell", className: "w-6 h-6" })
      ),
      React.createElement("div", { className: "flex-1" },
        React.createElement("p", { className: "font-semibold text-text-primary" }, notification.summary),
        React.createElement("p", { className: "text-sm text-text-secondary" }, "Starts at ", formatTime(notification.startTime))
      ),
      React.createElement("div", { className: "flex-shrink-0" },
        React.createElement("button", { onClick: () => onClose(notification.id), className: "p-1 rounded-full hover:bg-text-secondary/10", "aria-label": "Close notification" },
          React.createElement(Icon, { name: "x", className: "w-4 h-4 text-text-secondary" })
        )
      )
    )
  );
};
// --- END OF components/EventNotification.tsx ---

// --- START OF components/EventNotificationContainer.tsx ---
const EventNotificationContainer = ({ notifications, onClose }) => {
  return (
    React.createElement("div", { className: "fixed bottom-4 right-4 z-50 space-y-3" },
      notifications.map(notification => (
        React.createElement(EventNotification, {
          key: notification.id,
          notification: notification,
          onClose: onClose
        })
      ))
    )
  );
};
// --- END OF components/EventNotificationContainer.tsx ---


// --- START OF App.tsx ---
const App = () => {
    const [settings, setSettings] = useLocalStorage('geeclock-settings', INITIAL_SETTINGS);
    const [timers, setTimers] = useLocalStorage('geeclock-timers', []);
    const [activeTab, setActiveTab] = useState('clock');
    const [isAddTimerModalOpen, setAddTimerModalOpen] = useState(false);
    const [isSettingsModalOpen, setSettingsModalOpen] = useState(false);
    
    const [events, setEvents] = useState([]);
    const [eventsLoading, setEventsLoading] = useState(false);
    const [eventsError, setEventsError] = useState(null);

    const [notifications, setNotifications] = useState([]);
    const notifiedEventIds = useRef(new Set());

    useEffect(() => {
        const root = document.documentElement;
        const theme = THEMES[settings.theme]?.[settings.darkMode ? 'dark' : 'light'] || THEMES.default.dark;
      
        Object.entries(theme).forEach(([key, value]) => {
            root.style.setProperty(`--color-${key}`, value);
        });
      
        if (settings.darkMode) {
            root.classList.add('dark');
        } else {
            root.classList.remove('dark');
        }
    }, [settings.theme, settings.darkMode]);

    useEffect(() => {
        if (!settings.icalUrl) {
            setEvents([]);
            return;
        }

        const fetchAndParseEvents = async () => {
            setEventsLoading(true);
            setEventsError(null);
            try {
                const response = await fetch(`https://corsproxy.io/?${encodeURIComponent(settings.icalUrl)}`);
                if (!response.ok) {
                  throw new Error(`Failed to fetch calendar data (status: ${response.status}). Check URL and CORS policy.`);
                }
                const data = await response.text();
                const allEvents = parseICal(data);
                const upcomingEvents = allEvents.filter(e => e.end >= new Date());
                setEvents(upcomingEvents);
            } catch (error) {
                console.error("Error fetching iCal feed:", error);
                setEventsError(error instanceof Error ? error.message : 'An unknown error occurred.');
                setEvents([]);
            } finally {
                setEventsLoading(false);
            }
        };

        fetchAndParseEvents();
    }, [settings.icalUrl]);

    useEffect(() => {
        const checkEvents = () => {
          const now = new Date();
          const fiveMinutesFromNow = new Date(now.getTime() + 5 * 60 * 1000);
    
          events.forEach(event => {
            if (
              event.start > now &&
              event.start <= fiveMinutesFromNow &&
              !notifiedEventIds.current.has(event.uid)
            ) {
                const newNotification = {
                    id: Date.now(),
                    summary: event.summary,
                    startTime: event.start,
                };
                setNotifications(prev => [...prev, newNotification]);
                notifiedEventIds.current.add(event.uid);
            }
          });
        };
    
        const intervalId = setInterval(checkEvents, 60 * 1000);
        return () => clearInterval(intervalId);
      }, [events]);

    const handleSettingsChange = (newSettings) => {
        setSettings(newSettings);
    };

    const handleAddTimer = useCallback(({ label, duration }) => {
        const isMusicPlayer = duration === 86400; // 24 * 60 * 60 seconds

        const newTimer = {
            id: Date.now(),
            label: isMusicPlayer ? '24-Hour Lo-Fi Radio' : label,
            duration,
            remaining: duration,
            isRunning: false,
            startTime: null,
            isCollapsed: false,
            isMusicPlayer,
        };
        setTimers(prev => [...prev, newTimer]);
    }, [setTimers]);

    const handleDeleteTimer = useCallback((id) => {
        setTimers(prev => prev.filter(t => t.id !== id));
    }, [setTimers]);
    
    const handleToggleTimer = useCallback((id) => {
        setTimers(currentTimers => currentTimers.map(timer => {
            if (timer.id !== id) return timer;
            
            if (!timer.isRunning && timer.remaining <= 0) {
                return timer;
            }
            
            const isRunning = !timer.isRunning;
            if (isRunning) {
                const startTime = Date.now() - ((timer.duration - timer.remaining) * 1000);
                return { ...timer, isRunning: true, startTime };
            } else {
                if (!timer.startTime) return timer;
                const elapsed = (Date.now() - timer.startTime) / 1000;
                const remaining = timer.duration - elapsed;
                return { ...timer, isRunning: false, remaining: Math.max(0, remaining), startTime: null };
            }
        }));
    }, [setTimers]);
    
    const handleResetTimer = useCallback((id) => {
        setTimers(currentTimers => currentTimers.map(timer => {
            if (timer.id === id) {
                return { ...timer, isRunning: false, remaining: timer.duration, startTime: null };
            }
            return timer;
        }));
    }, [setTimers]);

    const handleToggleTimerCollapse = useCallback((id) => {
        setTimers(currentTimers => currentTimers.map(timer =>
            timer.id === id ? { ...timer, isCollapsed: !timer.isCollapsed } : timer
        ));
    }, [setTimers]);

    const handleRemoveNotification = (id) => {
        setNotifications(prev => prev.filter(n => n.id !== id));
    };

    const alarmSoundUrl = settings.alarmSound === 'custom' 
        ? settings.customAlarmSoundUrl 
        : (ALARM_SOUNDS[settings.alarmSound]?.url || ALARM_SOUNDS.default.url);

    return (
        React.createElement("div", { className: "min-h-screen flex flex-col max-w-3xl mx-auto" },
            React.createElement(Header, { 
                onSettingsClick: () => setSettingsModalOpen(true),
                settings: settings
            }),
            React.createElement("nav", { className: "flex justify-center p-2" },
                React.createElement("div", { className: "flex items-center gap-2 bg-surface p-1.5 rounded-full animate-fade-in" },
                    React.createElement("button", { onClick: () => setActiveTab('clock'), className: `px-4 py-1.5 text-sm font-semibold rounded-full flex items-center gap-2 transition-colors ${activeTab === 'clock' ? 'bg-primary text-white' : 'hover:bg-background/50'}` },
                        React.createElement(Icon, { name: "clock", className: "w-5 h-5" }), "Clock"
                    ),
                    React.createElement("button", { onClick: () => setActiveTab('timers'), className: `px-4 py-1.5 text-sm font-semibold rounded-full flex items-center gap-2 transition-colors ${activeTab === 'timers' ? 'bg-primary text-white' : 'hover:bg-background/50'}` },
                        React.createElement(Icon, { name: "timer", className: "w-5 h-5" }), "Timers"
                    ),
                    React.createElement("button", { onClick: () => setActiveTab('events'), className: `px-4 py-1.5 text-sm font-semibold rounded-full flex items-center gap-2 transition-colors ${activeTab === 'events' ? 'bg-primary text-white' : 'hover:bg-background/50'}` },
                        React.createElement(Icon, { name: "calendar", className: "w-5 h-5" }), "Events"
                    )
                )
            ),
            React.createElement("main", { className: "flex-1" },
                activeTab === 'clock' && React.createElement(Clock, { hourFormat: settings.hourFormat }),
                activeTab === 'timers' && (
                    React.createElement(TimerList, { 
                        timers: timers,
                        onAdd: () => setAddTimerModalOpen(true),
                        onDelete: handleDeleteTimer,
                        onToggle: handleToggleTimer,
                        onReset: handleResetTimer,
                        onToggleCollapse: handleToggleTimerCollapse,
                        alarmSoundUrl: alarmSoundUrl
                    })
                ),
                activeTab === 'events' && (
                    React.createElement(Events, { 
                        events: events,
                        loading: eventsLoading,
                        error: eventsError,
                        icalUrl: settings.icalUrl
                    })
                )
            ),
            activeTab === 'timers' && (
                React.createElement("div", { className: "fixed bottom-6 right-6 z-20" },
                    React.createElement("button", { onClick: () => setAddTimerModalOpen(true), className: "p-4 bg-secondary text-white rounded-full shadow-lg hover:scale-105 transition-transform", "aria-label": "Add Timer" },
                        React.createElement(Icon, { name: "plus", className: "w-7 h-7" })
                    )
                )
            ),
            React.createElement(AddTimerModal, { 
                isOpen: isAddTimerModalOpen,
                onClose: () => setAddTimerModalOpen(false),
                onAddTimer: handleAddTimer
            }),
            React.createElement(SettingsModal, { 
                isOpen: isSettingsModalOpen,
                onClose: () => setSettingsModalOpen(false),
                settings: settings,
                onSettingsChange: handleSettingsChange
            }),
            React.createElement(EventNotificationContainer, {
                notifications: notifications,
                onClose: handleRemoveNotification
            })
        )
    );
};
// --- END OF App.tsx ---

// --- START OF index.tsx ---
const rootElement = document.getElementById('root');
if (!rootElement) {
  throw new Error("Could not find root element to mount to");
}
const root = ReactDOM.createRoot(rootElement);
root.render(
  React.createElement(React.StrictMode, null, 
    React.createElement(App, null)
  )
);
// --- END OF index.tsx ---
    </script>
  </body>
</html>
